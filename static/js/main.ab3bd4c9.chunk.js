(this.webpackJsonpmarketing=this.webpackJsonpmarketing||[]).push([[0],{148:function(e,t,a){e.exports={"search-container":"main_search-container__2S-YQ","result-container":"main_result-container__36LIZ",wrapper:"main_wrapper__2di95"}},414:function(e,t,a){},415:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(38),c=a.n(n),s=a(102),i=a(431),o="GET_ALL_MARKETING_DATA_REQUESTED",l="GET_ALL_MARKETING_DATA_SUCCEEDED",u="GET_ALL_MARKETING_DATA_FAILED",d="SEARCH_MARKETING_DATA_REQUESTED",j="SEARCH_MARKETING_DATA_SUCCEEDED",p="SEARCH_MARKETING_DATA_FAILED",b="SET_FILTER_PARAMETERS",O=a(36),h=a(426),m=a(427),x=a(429),f=a(16),y={labelCol:{span:24},wrapperCol:{span:24}},g=function(e){var t=e.handleSearch,a=e.datasources,r=e.campaigns;return Object(f.jsxs)(h.a,{name:"basic",onFinish:t,children:[Object(f.jsx)(h.a.Item,Object(O.a)(Object(O.a)({label:"Datasources",name:"datasources"},y),{},{children:Object(f.jsx)(m.a,{mode:"multiple",allowClear:!0,style:{width:"100%"},placeholder:"All",options:null===a||void 0===a?void 0:a.map((function(e){return{label:e,value:e}}))})})),Object(f.jsx)(h.a.Item,Object(O.a)(Object(O.a)({label:"Campaigns",name:"campaigns"},y),{},{children:Object(f.jsx)(m.a,{mode:"multiple",allowClear:!0,placeholder:"All",style:{width:"100%"},options:null===r||void 0===r?void 0:r.map((function(e){return{label:e,value:e}}))})})),Object(f.jsx)(h.a.Item,{children:Object(f.jsx)(x.a,{type:"primary",htmlType:"submit",children:"\ud83d\udd0e \xa0 Search"})})]})},v=a(420),k=a(421),A=a(425),E=a(237),_=a(238),w=a(118),T=a(115),D=a(246),S=function(e){var t=e.data;return Object(f.jsx)(v.a,{width:"100%",height:"100%",children:Object(f.jsxs)(k.a,{width:500,height:300,data:t,margin:{top:5,right:30,left:20,bottom:5},children:[Object(f.jsx)(A.a,{strokeDasharray:"3 3"}),Object(f.jsx)(E.a,{dataKey:"date"}),Object(f.jsx)(_.a,{}),Object(f.jsx)(w.a,{}),Object(f.jsx)(T.a,{}),Object(f.jsx)(D.a,{type:"monotone",dataKey:"impressions",stroke:"#8884d8",activeDot:{r:8}}),Object(f.jsx)(D.a,{type:"monotone",dataKey:"clicks",stroke:"#82ca9d"})]})})},C=a(148),I=a.n(C),R=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.marketing.result})),a=Object(s.c)((function(e){return e.marketing.filterParameters})),n=a.datasources,c=a.campaigns;Object(i.a)((function(){e({type:o,payload:null})}));var l=Object(r.useCallback)((function(t){e({type:d,payload:t})}),[e]);return Object(f.jsxs)("div",{className:I.a.wrapper,children:[Object(f.jsx)("div",{className:I.a["search-container"],children:Object(f.jsx)(g,{datasources:n,campaigns:c,handleSearch:l})}),Object(f.jsx)("div",{className:I.a["result-container"],children:Object(f.jsx)(S,{data:t})})]})},N=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("header",{className:"App-header",children:[Object(f.jsx)("h1",{children:"Advertising data challenge \ud83d\udcc8"}),Object(f.jsxs)("ul",{children:[Object(f.jsx)("li",{children:"Select zero to n datasources"}),Object(f.jsx)("li",{children:"Select zero to n campaigns"})]}),Object(f.jsx)("span",{className:"info",children:'(Where zero means "All")'})]}),Object(f.jsx)("main",{children:Object(f.jsx)(R,{})}),Object(f.jsx)("footer",{children:Object(f.jsxs)("span",{children:["Copyright \xa9 ",(new Date).getFullYear()," \ud83d\ude80"]})})]})},P=a(77),L=a(245),G=(a(396),{datasources:void 0,campaigns:void 0}),K={fetched:!1,inProgress:!1,error:null,query:G,result:[],data:[],filterParameters:{}},M=Object(P.b)({marketing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return Object(O.a)(Object(O.a)({},e),{},{inProgress:!0});case l:return Object(O.a)(Object(O.a)({},e),{},{inProgress:!1,data:t.payload,fetched:!0,error:null,query:G,result:[]});case d:return Object(O.a)(Object(O.a)({},e),{},{inProgress:!0});case j:return Object(O.a)(Object(O.a)({},e),{},{inProgress:!1,query:t.payload.query,result:t.payload.result});case b:return Object(O.a)(Object(O.a)({},e),{},{filterParameters:t.payload});case u:case p:return Object(O.a)(Object(O.a)({},e),{},{inProgress:!1,data:[],fetched:!0,error:t.payload,query:G,result:[]});default:return e}}}),q=a(44),F=a.n(q),U=a(45),z=a(58),H=a.n(z),Q=a(239),Y=a(240),J=a.n(Y),B=function(){var e=Object(Q.a)(F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J.a.get("".concat("https://xekven.github.io/marketing-search","/assets/data.json"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=a(34);function Z(e,t){var a={};return e.forEach((function(e){var r=!t.campaigns||0===t.campaigns.length||t.campaigns.includes(e.campaign),n=!t.datasources||0===t.datasources.length||t.datasources.includes(e.datasource);if(r&&n){var c=+e.clicks,s=+e.impressions;if(a[e.date]){var i=a[e.date];i.clicks=i.clicks+c,i.impressions=i.impressions+s}else a[e.date]={clicks:c,impressions:s}}})),Object.entries(a).map((function(e){var t=Object(W.a)(e,2),a=t[0],r=t[1];return{date:a,clicks:r.clicks,impressions:r.impressions}}))}function V(e){var t={},a={};return e.forEach((function(e){var r=e.campaign,n=e.datasource;t[r]||(t[r]=!0),a[n]||(a[n]=!0)})),{campaigns:Object.keys(t),datasources:Object.keys(a)}}var X=F.a.mark(te),$=F.a.mark(ae),ee=F.a.mark(re);function te(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.f)(o,ae);case 2:return e.next=4,Object(U.f)(d,re);case 4:case"end":return e.stop()}}),X)}function ae(){var e,t,a;return F.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(U.b)(B);case 3:return e=r.sent,r.next=6,Object(U.d)({type:l,payload:e.data});case 6:return r.next=8,Object(U.b)(V,e.data);case 8:return t=r.sent,r.next=11,Object(U.d)({type:b,payload:t});case 11:return r.delegateYield(re({type:"",payload:{}}),"t0",12);case 12:r.next=19;break;case 14:return r.prev=14,r.t1=r.catch(0),a=r.t1.message,r.next=19,Object(U.d)({type:u,payload:a});case 19:case"end":return r.stop()}}),$,null,[[0,14]])}function re(e){var t,a,r,n,c;return F.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,t=e.payload,s.next=4,Object(U.e)((function(e){return e.marketing.query}));case 4:if(a=s.sent,H()(a,t)){s.next=16;break}return s.next=8,Object(U.e)((function(e){return e.marketing.data}));case 8:return r=s.sent,s.next=11,Object(U.b)(Z,r,t);case 11:return n=s.sent,s.next=14,Object(U.d)({type:j,payload:{query:t,result:n}});case 14:s.next=17;break;case 16:console.warn("Multiple search detected! :P");case 17:s.next=24;break;case 19:return s.prev=19,s.t0=s.catch(0),c=s.t0.message,s.next=24,Object(U.d)({type:p,payload:c});case 24:case"end":return s.stop()}}),ee,null,[[0,19]])}var ne=F.a.mark((function e(){return F.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.a)([Object(U.c)(te)]);case 2:case"end":return e.stop()}}),e)})),ce=Object(L.a)(),se=P.c,ie=[ce];var oe=Object(P.d)(M,{},se(P.a.apply(void 0,ie)));ce.run(ne);a(414);c.a.render(Object(f.jsx)(s.a,{store:oe,children:Object(f.jsx)(N,{})}),document.getElementById("root"))}},[[415,1,2]]]);
//# sourceMappingURL=main.ab3bd4c9.chunk.js.map